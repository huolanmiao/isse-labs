# TodoList 任务管理系统

方嘉聪 2200017849

**特别鸣谢: GPT-5-CodeX Agent**

## 项目简介

TodoList 任务管理系统基于 Flask + 原生 HTML/CSS/JavaScript 构建，展示了一个结构清晰、易于扩展的全栈示例。项目支持任务创建、筛选、搜索、排序、批量操作与数据持久化，适合用于课堂演示、实验教学或个人学习 REST 架构与前端交互。

## 技术栈

- **后端框架**：Python 3.10+、Flask
- **前端技术**：HTML5、CSS3、原生 JavaScript (Fetch API)
- **数据存储**：本地 JSON 文件 (`data/tasks.json`)
- **开发工具**：Postman（推荐用于接口调试）、任意现代浏览器（Chrome/Safari/Edge 等）

## 项目结构说明

```text
project/
├── app.py                # Flask 主应用，定义 REST 接口与数据持久化逻辑
├── data/
│   └── tasks.json         # 任务数据存储文件（自动生成，可手动预置示例数据）
├── static/
│   ├── script.js          # 前端交互逻辑：数据请求、渲染、批量操作、动画等
│   └── style.css          # Mac 风格界面样式（玻璃拟态、动画、响应式布局）
└── templates/
    └── index.html         # 主页面模版，定义界面结构与控件
```

> 若 `data/tasks.json` 不存在，首次运行时会自动创建。

## 安装与运行步骤

### 1. 环境依赖

- Python 3.10 及以上版本
- 建议使用虚拟环境（`venv` 或 Anaconda）
- Flask 2.x

### 2. 安装命令

```bash
# 克隆或下载项目后进入目录
cd project

# 创建虚拟环境（可选）
python3 -m venv .venv
source .venv/bin/activate    # Windows 使用 .venv\Scripts\activate

# 安装依赖
pip install flask
```

### 3. 运行项目

```bash
# 开发模式运行（自动重载）
flask --app app --debug run

# 或直接使用 Python 启动
python app.py
```

运行成功后，打开浏览器访问 `http://127.0.0.1:5000/` 即可使用可视化界面。

### 可选配置

- 如需预置任务，可在 `data/tasks.json` 中手动写入内容，格式见下文示例。
- 若部署到生产环境，请在 `app.py` 中关闭 `debug` 模式并配置 WSGI 服务器。

## 使用说明

### 前端界面操作

![界面截图](./asset/page-screenshot.png)

1. **添加任务**：在顶部表单填写标题、分类、优先级与截止时间，点击“添加任务”。
2. **筛选与搜索**：
   - 通过“分类”“优先级”下拉框筛选列表；
   - 使用搜索框按标题关键词过滤结果；
   - “显示全部”按钮可快速重置所有筛选条件。
3. **排序**：选择排序字段（截止时间/优先级）并点击“升序”或“降序”按钮，待处理与已完成区域会分别按照所选排序规则排列。
4. **任务分区**：
   - “未完成任务”区域展示待办事项；
   - “已完成任务”区域展示完成事项，并支持重新标记为未完成。
5. **任务操作**：
   - “标记完成/标记未完成”支持状态切换，完成时带渐隐移动动画；
   - “编辑”可修改标题、分类、优先级与截止时间；
   - “删除”会二次确认后移除任务。
6. **批量操作**：
   - 勾选任务或使用“全选当前列表”后，可执行“批量标记完成”或“批量删除”；
   - 批量操作会调用后端接口并刷新列表。

### REST API 调用

接口采用统一响应格式：

```json
{
  "status": "success",         // success 或 error
  "data": [...],                // 请求结果数据（部分接口可为空）
  "message": "操作成功"         // 描述信息
}
```

核心接口列表：

- `GET /tasks`
  - 查询任务列表，支持可选参数：`category`、`priority`、`search`
  - 示例：`/tasks?category=学习&priority=高`
- `POST /tasks`
  - 新增任务，JSON 体包含 `title`、`category`、`priority`、`due_date`
- `PUT /tasks/<id>`
  - 更新任务，可单独修改任意字段（标题/分类/优先级/截止时间/完成状态）
- `DELETE /tasks/<id>`
  - 删除某条任务
- `POST /tasks/batch`
  - 批量操作，JSON 体示例：

    ```json
    {
      "action": "complete",      // complete 或 delete
      "ids": [1, 2, 3]
    }
    ```

### 数据文件示例

```json
{
  "tasks": [
    {
      "id": 1,
      "title": "写实验报告",
      "category": "学习",
      "priority": "高",
      "completed": false,
      "due_date": "2024-12-31T23:59:59"
    }
  ]
}
```

## 功能列表

| 功能模块         | 描述 |
|------------------|------|
| 任务创建         | 新增任务，支持分类、优先级与截止时间设置 |
| 待办/已完成分区  | 未完成与已完成任务分屏展示，状态独立排序 |
| 状态切换         | 支持标记完成/未完成，并带有完成动画 |
| 任务编辑         | 在列表内快速编辑标题、分类、优先级、截止时间 |
| 任务删除         | 支持单条删除与批量删除，操作前确认提示 |
| 搜索过滤         | 分类、优先级过滤与标题关键词搜索组合查询 |
| 排序功能         | 支持按截止时间或优先级升降序排列 |
| 批量操作         | 多选任务后批量标记完成或删除 |
| 数据持久化       | 所有任务实时写入 `data/tasks.json`，重启不丢失 |
| REST API         | 完整 CRUD 接口，统一响应格式，适合二次开发或前端对接 |

---

如需进一步扩展（例如用户系统、任务提醒、数据库接入等），可在现有模块化结构基础上逐步迭代。欢迎反馈与贡献改进意见！
